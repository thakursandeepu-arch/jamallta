<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Attendance & Payroll | Jamallta Films</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="attendance.css" />
</head>
<body>
  <div class="container">
    <div class="page-header">
      <div>
        <div class="page-title">Attendance & Payroll</div>
        <div class="page-subtitle">Track attendance and calculate salary automatically.</div>
      </div>
      <div class="header-actions">
        <button class="btn" id="openAdd">+ Add Attendance</button>
      </div>
    </div>

    <div class="cards">
      <div class="card"><div class="card-title">Total Staff</div><span id="kStaff">0</span></div>
      <div class="card"><div class="card-title">Present Today</div><span id="kPresent">0</span></div>
      <div class="card"><div class="card-title">Absent Today</div><span id="kAbsent">0</span></div>
      <div class="card blue"><div class="card-title">Monthly Payroll</div><span id="kPayroll">?0</span></div>
    </div>

    <div class="chart-box">
      <div class="chart-controls">
        <label for="chartRange">Range</label>
        <select id="chartRange">
          <option value="30d">Last 30 Days</option>
          <option value="year">Last 12 Months</option>
          <option value="custom">Custom</option>
        </select>
        <div class="chart-custom" id="chartCustom">
          <input type="date" id="chartFrom" />
          <span>to</span>
          <input type="date" id="chartTo" />
          <button id="chartApply" type="button">Apply</button>
        </div>
      </div>
      <canvas id="attendanceChart"></canvas>
    </div>

    <div class="panel">
      <div class="panel-header">
        <div class="panel-title">Attendance Records</div>
        <div class="panel-actions">
          <input id="search" placeholder="Search employee / date" />
          <select id="filterStatus">
            <option value="all">All</option>
            <option value="Present">Present</option>
            <option value="Absent">Absent</option>
            <option value="Leave">Leave</option>
          </select>
        </div>
      </div>
      <table class="data-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Employee</th>
            <th>Status</th>
            <th>Check In</th>
            <th>Check Out</th>
            <th>Work Hours</th>
            <th>Daily Salary</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>

    <div class="panel">
      <div class="panel-header">
        <div class="panel-title">Salary Rules</div>
      </div>
      <div class="rules-grid">
        <div>
          <label>Monthly Salary</label>
          <input id="ruleMonthly" type="number" placeholder="e.g. 15000" />
        </div>
        <div>
          <label>Working Days</label>
          <input id="ruleDays" type="number" placeholder="e.g. 26" />
        </div>
        <div>
          <label>Overtime (per hour)</label>
          <input id="ruleOvertime" type="number" placeholder="e.g. 100" />
        </div>
        <div>
          <label>Leave Deduction (per day)</label>
          <input id="ruleLeave" type="number" placeholder="e.g. 500" />
        </div>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="modalBg">
    <div class="modal">
      <div class="modal-top">
        <h3>Add Attendance</h3>
        <button class="btn ghost" id="closeModal">Close</button>
      </div>
      <div class="form-grid">
        <div>
          <label>Employee Name</label>
          <input id="mName" />
        </div>
        <div>
          <label>Date</label>
          <input id="mDate" type="date" />
        </div>
        <div>
          <label>Status</label>
          <select id="mStatus">
            <option>Present</option>
            <option>Absent</option>
            <option>Leave</option>
          </select>
        </div>
        <div>
          <label>Check In</label>
          <input id="mIn" type="time" />
        </div>
        <div>
          <label>Check Out</label>
          <input id="mOut" type="time" />
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn" id="saveAttendance">Save</button>
      </div>
    </div>
  </div>

  <script src="attendance.js"></script>
<script type="module" src="/jamallta/admin/assets/admin-auth.js"></script>
</body>
</html>


